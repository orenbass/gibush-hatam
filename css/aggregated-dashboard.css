/* aggregated-dashboard.css - עיצוב ייעודי לדשבורד המאוחד */

.aggregated-dashboard{display:flex;flex-direction:column;gap:1rem;font-family:system-ui,'Segoe UI',Arial,sans-serif;max-width:100%;width:100%;padding:0;overflow:visible;}
.agg-header{background:var(--agg-head-bg,#ffffffcc);backdrop-filter:blur(6px);border:1px solid #e2e8f0;border-radius:1rem;padding:0.75rem 1rem;position:relative;z-index:50;margin-bottom:1rem;}
.dark .agg-header{background:#1e293bcc;border-color:#334155;}
.agg-header-row{display:flex;align-items:center;justify-content:space-between;gap:.75rem;flex-wrap:wrap;}
.agg-header-row--filters{flex-direction:column;align-items:stretch;gap:.75rem;}
.agg-header-left{display:flex;gap:.5rem;flex-wrap:wrap;align-items:center;}
.agg-title{margin:0;font-size:1.25rem;font-weight:700;color:#1d4ed8;}
.dark .agg-title{color:#60a5fa;}
.agg-subtitle{font-size:.75rem;color:#475569;margin-top:.15rem;}
.dark .agg-subtitle{color:#94a3b8;}
.agg-inline-stats{font-size:.7rem;}

/* Buttons */
.agg-btn{border:none;border-radius:.65rem;padding:.55rem .85rem;font-weight:600;font-size:.75rem;display:inline-flex;align-items:center;gap:.4rem;cursor:pointer;transition:.18s;background:#e2e8f0;color:#1e293b;}
.agg-btn-primary{background:#2563eb;color:#fff;}
.agg-btn-primary:hover{background:#1d4ed8;}
.agg-btn-success{background:#059669;color:#fff;}
.agg-btn-success:hover{background:#047857;}
.agg-btn-secondary:hover{background:#cbd5e1;}
.dark .agg-btn-secondary{background:#334155;color:#f1f5f9;}
.dark .agg-btn-secondary:hover{background:#475569;}
.dark .agg-btn-success{background:#047857;}
.dark .agg-btn-success:hover{background:#065f46;}
.agg-btn-filter{background:#6366f1;color:#fff;min-width:120px;}
.agg-btn-filter:hover{background:#4f46e5;}
.dark .agg-btn-filter{background:#4338ca;}
.dark .agg-btn-filter:hover{background:#3730a3;}
.agg-btn-sm{padding:.45rem .65rem;font-size:.7rem;}

/* Search */
.agg-search-wrap{position:relative;width:100%;}
.agg-search-wrap input{padding:.5rem .9rem;border:1px solid #cbd5e1;border-radius:2rem;font-size:.8rem;width:100%;background:#fff;}
.dark .agg-search-wrap input{background:#1e293b;border-color:#334155;color:#f1f5f9;}
.agg-search-wrap .clear-btn{position:absolute;left:.4rem;top:50%;transform:translateY(-50%);background:transparent;border:none;cursor:pointer;font-size:.7rem;color:#64748b;}

/* Filters */
.agg-header-right{display:flex;flex-direction:column;align-items:stretch;flex:1;width:100%;position:relative;z-index:100;}
.agg-filters-line{display:flex;justify-content:flex-end;gap:.5rem;margin-top:.4rem;width:100%;flex-wrap:wrap;}
.agg-filter-select{appearance:none;background:#fff url('data:image/svg+xml;utf8,<svg fill="%2364748b" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M5.5 7l4.5 5 4.5-5H5.5z"/></svg>') no-repeat left .55rem center/12px 12px;border:1px solid #cbd5e1;border-radius:.7rem;padding:.45rem 1.8rem .45rem .9rem;font-size:.7rem;font-weight:600;color:#334155;min-width:110px;max-width:160px;cursor:pointer;flex:1;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;}
.agg-filter-select:focus{outline:2px solid #2563eb;outline-offset:2px;}
.dark .agg-filter-select{background:#1e293b url('data:image/svg+xml;utf8,<svg fill="%2394a3b8" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M5.5 7l4.5 5 4.5-5H5.5z"/></svg>') no-repeat left .55rem center/12px 12px;border-color:#334155;color:#e2e8f0;}

/* Score filter dropdown */
.score-filter-dropdown{position:relative;z-index:200;}
.score-filter-menu{position:absolute;top:calc(100% + .4rem);left:0;background:#fff;border:1px solid #cbd5e1;border-radius:.8rem;padding:.8rem;box-shadow:0 10px 30px -5px rgba(0,0,0,.3),0 0 0 1px rgba(0,0,0,.08);z-index:300;min-width:220px;max-height:400px;overflow-y:auto;}
.dark .score-filter-menu{background:#1e293b;border-color:#334155;box-shadow:0 10px 30px -5px rgba(0,0,0,.6),0 0 0 1px rgba(255,255,255,.1);}
.score-filter-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:.6rem;padding-bottom:.5rem;border-bottom:1px solid #e2e8f0;}
.dark .score-filter-header{border-color:#334155;}
.score-filter-header span{font-size:.7rem;font-weight:600;color:#334155;}
.dark .score-filter-header span{color:#e2e8f0;}
.score-clear-all{background:transparent;border:none;color:#dc2626;font-size:.65rem;font-weight:600;cursor:pointer;padding:.2rem .4rem;border-radius:.4rem;}
.score-clear-all:hover{background:#fef2f2;}
.dark .score-clear-all{color:#f87171;}
.dark .score-clear-all:hover{background:#7f1d1d;}
.score-checkboxes{display:flex;flex-direction:column;gap:.45rem;margin-bottom:.7rem;max-height:250px;overflow-y:auto;}
.score-checkbox-label{display:flex;align-items:center;gap:.5rem;cursor:pointer;padding:.35rem .5rem;border-radius:.5rem;transition:.15s;font-size:.7rem;font-weight:600;color:#475569;}
.score-checkbox-label:hover{background:#f1f5f9;}
.dark .score-checkbox-label{color:#cbd5e1;}
.dark .score-checkbox-label:hover{background:#334155;}
.score-checkbox{width:16px;height:16px;cursor:pointer;accent-color:#6366f1;}
.score-filter-actions{display:flex;gap:.4rem;padding-top:.5rem;border-top:1px solid #e2e8f0;}
.dark .score-filter-actions{border-color:#334155;}
.score-filter-actions button{flex:1;}

/* Content area */
.agg-body{display:block;width:100%;position:relative;z-index:1;}
.agg-body--single{display:block;width:100%;}
.agg-content{background:transparent;border:none;padding:.5rem .4rem;box-shadow:none;width:100%;max-width:100%;overflow:visible;}
.dark .agg-content{background:transparent;}

/* Content title */
.content-title{margin:0 0 1rem;font-size:.95rem;font-weight:400;color:#1d4ed8;padding-bottom:.5rem;border-bottom:2px solid #e2e8f0;letter-spacing:.3px;}
.dark .content-title{color:#60a5fa;border-color:#334155;}

/* Unified row layout - works for all screen sizes */
.agg-mobile-lines{display:flex;flex-direction:column;gap:.18rem;width:100%;position:relative;z-index:1;}
.candidate-row{display:grid;grid-template-columns:repeat(9,minmax(0,1fr));align-items:center;font-size:.6rem;background:#ffffff;border:1px solid #e2e8f0;border-radius:.45rem;padding:.3rem .4rem;gap:.15rem;font-weight:600;}
.candidate-row-header{position:sticky;top:0;z-index:5;background:#f1f5f9;border:1px solid #cbd5e1;border-radius:.45rem;font-weight:600;font-size:.58rem;color:#334155;box-shadow:0 2px 4px rgba(0,0,0,.1);}
.dark .candidate-row-header{background:#1e293b;border-color:#334155;color:#e2e8f0;box-shadow:0 2px 4px rgba(0,0,0,.4);}
.dark .candidate-row{background:#1e293b;border-color:#334155;}
.candidate-row.clickable{cursor:pointer;transition:.15s;}
.candidate-row.clickable:hover{background:#f1f5f9;}
.dark .candidate-row.clickable:hover{background:#334155;}
.candidate-row .col{display:flex;align-items:center;justify-content:center;white-space:nowrap;padding:0 .1rem;}
.candidate-row .col-shoulder{font-weight:700;color:#111827;font-size:.65rem;}
.dark .candidate-row .col-shoulder{color:#f1f5f9;}
.candidate-row .col-group{color:#475569;font-size:.58rem;}
.dark .candidate-row .col-group{color:#94a3b8;}
.candidate-row .col-sprint{color:#b45309;font-weight:600;}
.candidate-row .col-crawl{color:#047857;font-weight:600;}
.candidate-row .col-stretcher{color:#4f46e5;font-weight:600;}
.candidate-row .col-overall{color:#0f766e;font-weight:700;}
.candidate-row .col-evals{color:#334155;font-size:.5rem;}
.dark .candidate-row .col-evals{color:#94a3b8;}
.candidate-row .col-pos{font-weight:700;color:#334155;}
.dark .candidate-row .col-pos{color:#e2e8f0;}
.candidate-row .col-pos.top-1{background:linear-gradient(135deg,#ffd700,#ffed4e);color:#7c2d12;border-radius:.35rem;padding:.1rem .2rem;}
.candidate-row .col-pos.top-2{background:linear-gradient(135deg,#c0c0c0,#e5e7eb);color:#1f2937;border-radius:.35rem;padding:.1rem .2rem;}
.candidate-row .col-pos.top-3{background:linear-gradient(135deg,#cd7f32,#f59e0b);color:#78350f;border-radius:.35rem;padding:.1rem .2rem;}
.candidate-row .col-comments{font-size:.65rem;justify-content:flex-start;padding-left:.15rem;}
.comments-icon{display:inline-flex;align-items:center;justify-content:center;width:16px;height:16px;border-radius:3px;background:#2563eb;color:#fff;font-size:.55rem;box-shadow:0 0 0 1px #fff,0 1px 3px rgba(0,0,0,.15);}
.dark .comments-icon{background:#1d4ed8;box-shadow:0 0 0 1px #0f172a,0 1px 3px rgba(0,0,0,.5);}

/* Dark mode enhancements for scores */
.dark .candidate-row .col-sprint{color:#fb923c;}
.dark .candidate-row .col-crawl{color:#34d399;}
.dark .candidate-row .col-stretcher{color:#a78bfa;}
.dark .candidate-row .col-overall{color:#14b8a6;}

/* Retired candidates section */
.retired-candidates-section{margin-top:2rem;border:1px solid #fecaca;border-radius:1rem;background:#fef2f2;overflow:hidden;padding:1rem;}
.dark .retired-candidates-section{border-color:#7f1d1d;background:#1f1917;}
.retired-title{margin:0;font-size:.9rem;font-weight:700;color:#991b1b;display:flex;align-items:center;gap:.5rem;}
.dark .retired-title{color:#fca5a5;}
.retired-title::before{content:'⚠️';font-size:1rem;}
.retired-bubbles{display:flex;flex-wrap:wrap;gap:.5rem;}
.retired-bubble{background:#ef4444;color:#fff;border:none;border-radius:50%;padding:.5rem .75rem;font-size:.8rem;font-weight:700;cursor:pointer;transition:.2s;}
.retired-bubble:hover{background:#dc2626;}
.dark .retired-bubble{background:#7f1d1d;}
.dark .retired-bubble:hover{background:#991b1b;}

/* Date picker */
.agg-date-picker{display:flex;justify-content:center;align-items:flex-start;padding:2rem 1rem;}
.agg-date-picker .picker-card{width:clamp(300px,520px,90vw);background:linear-gradient(135deg,#ffffff 0%,#f0f7ff 60%,#e8f0ff 100%);border:1px solid #dbe6f4;border-radius:1.4rem;padding:1.4rem 1.6rem;box-shadow:0 8px 28px -6px rgba(0,64,128,.18),0 2px 6px rgba(0,0,0,.08);position:relative;overflow:hidden;}
.dark .agg-date-picker .picker-card{background:linear-gradient(135deg,#0f172a 0%,#1e293b 55%,#1e3a5f 100%);border-color:#1e3a5f;}
.picker-head:after{content:"";position:absolute;inset:0;pointer-events:none;background:radial-gradient(circle at 85% 15%,rgba(56,189,248,.35),transparent 55%);} 
.dark .picker-head:after{background:radial-gradient(circle at 85% 15%,rgba(96,165,250,.35),transparent 55%);} 
.picker-title{margin:0;font-size:1.55rem;font-weight:800;letter-spacing:-.5px;background:linear-gradient(90deg,#1d4ed8,#0d9488);-webkit-background-clip:text;background-clip:text;color:transparent;}
.dark .picker-title{background:linear-gradient(90deg,#60a5fa,#34d399);-webkit-background-clip:text;background-clip:text;}
.picker-sub{margin:.35rem 0 1.2rem;font-size:.85rem;color:#475569;line-height:1.3;font-weight:500;}
.dark .picker-sub{color:#94a3b8;}
.picker-form{display:grid;grid-template-columns:repeat(auto-fit,minmax(110px,1fr));gap:1rem;margin-bottom:1.1rem;}
.picker-field{display:flex;flex-direction:column;gap:.35rem;font-size:.7rem;font-weight:600;color:#334155;}
.dark .picker-field{color:#cbd5e1;}
.picker-field input{background:#fff;border:1px solid #cbd5e1;border-radius:.9rem;padding:.65rem .75rem;font-size:.9rem;font-weight:600;text-align:center;box-shadow:0 1px 2px rgba(0,0,0,.04);transition:.18s;}
.picker-field input:focus{outline:none;border-color:#2563eb;box-shadow:0 0 0 3px #2563eb33;}
.dark .picker-field input{background:#0f172a;border-color:#334155;color:#e2e8f0;}
.dark .picker-field input:focus{border-color:#1d4ed8;box-shadow:0 0 0 3px #1d4ed833;}
.picker-load-btn{grid-column:1/-1;display:inline-flex;align-items:center;justify-content:center;gap:.5rem;font-weight:700;font-size:.9rem;padding:.85rem .95rem;border:none;border-radius:1rem;background:linear-gradient(90deg,#2563eb,#1d4ed8);color:#fff;cursor:pointer;box-shadow:0 6px 18px -5px rgba(37,99,235,.45),0 2px 4px rgba(0,0,0,.12);position:relative;overflow:hidden;transition:.25s;}
.picker-load-btn:hover{transform:translateY(-2px);box-shadow:0 10px 26px -6px rgba(37,99,235,.5),0 4px 10px rgba(0,0,0,.15);} 
.picker-load-btn.is-loading{opacity:.7;cursor:wait;}
.dark .picker-load-btn{background:linear-gradient(90deg,#1d4ed8,#1e3a8a);} 
.picker-error{min-height:18px;font-size:.7rem;color:#dc2626;font-weight:600;margin-top:.35rem;}

/* Overlay styles */
.agg-overlay{
  position:fixed;
  inset:0;
  display:flex;
  align-items:center;
  justify-content:center;
  padding:1rem;
  padding-top:max(80px, env(safe-area-inset-top, 20px) + 60px);
  background:rgba(0,0,0,.45);
  backdrop-filter:blur(4px);
  opacity:0;
  z-index:1000;
  transition:opacity .25s;
}
.agg-overlay.visible{opacity:1;}
.agg-overlay-backdrop{position:absolute;inset:0;cursor:pointer;}
.agg-overlay-panel{background:#fff;color:#1e293b;max-width:860px;width:100%;max-height:85vh;overflow:auto;border-radius:1rem;padding:1rem 1.25rem;box-shadow:0 15px 50px -10px rgba(0,0,0,.4),0 0 0 1px #e2e8f0;position:relative;z-index:1;}
.dark .agg-overlay-panel{background:#0f172a;color:#e2e8f0;box-shadow:0 15px 50px -10px #000,0 0 0 1px #334155;}
.panel-header{display:flex;align-items:center;justify-content:space-between;gap:.5rem;margin-bottom:.75rem;}
.panel-header h3{margin:0;font-size:1rem;font-weight:800;color:#1d4ed8;}
.dark .panel-header h3{color:#60a5fa;}
.close-btn{background:#ef4444;border:none;color:#fff;font-weight:700;border-radius:.55rem;padding:.35rem .6rem;cursor:pointer;font-size:.7rem;line-height:1;}
.close-btn:hover{background:#dc2626;}
.panel-section{margin-bottom:1rem;}
.summary-cards{display:grid;grid-template-columns:repeat(auto-fit,minmax(110px,1fr));gap:.55rem;margin:.65rem 0 0;}
.summary-card{background:#f1f5f9;padding:.55rem .5rem;border-radius:.75rem;text-align:center;font-size:.7rem;font-weight:600;box-shadow:0 1px 2px rgba(0,0,0,.06);} 
.summary-card span{display:block;font-size:.55rem;font-weight:600;color:#64748b;margin-bottom:.15rem;}
.summary-card.total{background:#0d9488;color:#fff;}
.dark .summary-card{background:#1e293b;color:#e2e8f0;}
.dark .summary-card span{color:#94a3b8;}
.combined-comments{margin-top:.75rem;background:#f8fafc;border:1px solid #e2e8f0;padding:.55rem .7rem;border-radius:.7rem;}
.dark .combined-comments{background:#1e293b;border-color:#334155;}
.combined-comments h4{margin:.1rem 0 .4rem;font-size:.65rem;}
.combined-comments ul{list-style:disc inside;margin:0;padding:0;display:flex;flex-direction:column;gap:.25rem;font-size:.58rem;}
.evaluator-accordion details{border:1px solid #e2e8f0;border-radius:.65rem;margin-bottom:.55rem;background:#fff;overflow:hidden;}
.dark .evaluator-accordion details{background:#1e293b;border-color:#334155;}
.evaluator-accordion summary{cursor:pointer;display:flex;align-items:center;justify-content:space-between;padding:.45rem .65rem;font-size:.62rem;font-weight:700;list-style:none;}
.evaluator-accordion summary::-webkit-details-marker{display:none;}
.eval-scores .pill{display:inline-block;min-width:32px;text-align:center;border-radius:1rem;padding:.18rem .4rem;font-size:.5rem;font-weight:700;margin-inline-start:.25rem;background:#e2e8f0;}
.pill.sprint{background:#fed7aa;color:#9a3412;}
.pill.crawl{background:#bbf7d0;color:#065f46;}
.pill.stretcher{background:#c7d2fe;color:#3730a3;}
.dark .eval-scores .pill{background:#334155;color:#e2e8f0;}
.eval-body{padding:.45rem .75rem .65rem;font-size:.6rem;display:flex;flex-direction:column;gap:.6rem;}
.comments-block ul{list-style:disc inside;margin:0;padding:0;display:flex;flex-direction:column;gap:.25rem;font-size:.58rem;}
.mini-time-list{list-style:none;margin:0;padding:0;display:flex;flex-direction:column;gap:.35rem;font-size:.55rem;}
.mini-time-list li{display:flex;gap:.4rem;align-items:center;flex-wrap:wrap;}
.mini-label{background:#e2e8f0;border-radius:.45rem;padding:.1rem .45rem;font-size:.5rem;font-weight:700;color:#334155;}
.dark .mini-label{background:#334155;color:#e2e8f0;}
.time-val{font-weight:700;color:#1d4ed8;}
.dark .time-val{color:#60a5fa;}
.tag-list{list-style:none;margin:0;padding:0;display:flex;gap:.35rem;flex-wrap:wrap;}
.tag{background:#e2e8f0;border-radius:.6rem;padding:.25rem .5rem;font-size:.55rem;font-weight:600;}
.dark .tag{background:#334155;color:#e2e8f0;}
.role-leader{background:#fcd34d;color:#92400e;}
.role-carrier{background:#a7f3d0;color:#065f46;}

/* Desktop adaptations - larger screens get slightly bigger text */
@media (min-width:768px){
  .candidate-row{font-size:.65rem;padding:.35rem .5rem;gap:.2rem;}
  .candidate-row-header{font-size:.62rem;}
  .candidate-row .col-shoulder{font-size:.7rem;}
  .agg-header-row--filters{flex-direction:row;align-items:center;}
  .agg-header-right{flex-direction:row;gap:.5rem;}
  .agg-filters-line{margin-top:0;}
  .agg-search-wrap{width:auto;min-width:250px;}
}